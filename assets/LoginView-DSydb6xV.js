import{_ as h,h as f,L as g,c as v,b as d,a as s,j as w,f as c,i as u,F as b,r as m,o as L}from"./index-BF57zz8q.js";import{e as i,T}from"./ToastMessages-qREQSHiW.js";import"./component-functions-DoEuF0vs.js";var E={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"jeff_hexschool",BASE_URL:"/2023Vue_week6",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:x}=E,V={data(){return{isLoading:!1,user:{username:"",password:""}}},methods:{signIn(){this.isLoading=!0;const n=`${x}/admin/signin`;f.post(n,this.user).then(e=>{setTimeout(()=>{this.isLoading=!1},500);const{token:a,expired:r}=e.data;document.cookie=`shopToken=${a}; expires=${new Date(r)}`,e.data.success&&(i.emit("push-message",{style:"success",title:"登入成功"}),this.$router.push("/admin/products"))}).catch(()=>{setTimeout(()=>{this.isLoading=!1},500),i.emit("push-message",{style:"danger",title:"登入資料有誤，請確認帳號密碼，將轉回登入頁面"})})}},provide(){return{emitter:i}},components:{Loading:g,ToastMessages:T}},y={class:"container-fluid mt-3 position-relative"},k=s("h2",null,"登入頁面",-1),I={class:"container mt-5",id:"mainApp"},M={class:"col-md-6"},P=s("h1",{class:"h3 mb-3 font-weight-normal"},"請先登入",-1),D={class:"mb-2"},R=s("label",{for:"inputEmail",class:"sr-only"},"Email address",-1),U={class:"mb-2"},B=s("label",{for:"inputPassword",class:"sr-only"},"Password",-1),S=s("div",{class:"text-end mt-4"},[s("button",{class:"btn btn-lg btn-primary btn-block",type:"submit"},"登入")],-1);function j(n,e,a,r,t,l){const p=m("Loading"),_=m("ToastMessages");return L(),v(b,null,[d(p,{active:t.isLoading},null,8,["active"]),s("div",y,[d(_)]),k,s("div",I,[s("form",{class:"row justify-content-center",onSubmit:e[2]||(e[2]=w((...o)=>l.signIn&&l.signIn(...o),["prevent"]))},[s("div",M,[P,s("div",D,[R,c(s("input",{id:"inputEmail",type:"email",class:"form-control",placeholder:"Email address",required:"",autofocus:"","onUpdate:modelValue":e[0]||(e[0]=o=>t.user.username=o)},null,512),[[u,t.user.username]])]),s("div",U,[B,c(s("input",{id:"inputPassword",type:"password",class:"form-control",placeholder:"Password",required:"","onUpdate:modelValue":e[1]||(e[1]=o=>t.user.password=o)},null,512),[[u,t.user.password]])]),S])],32)])],64)}const N=h(V,[["render",j]]);export{N as default};
